<div class="ai-chat-container">
  <div class="chat-header">
    <h3>
      <mat-icon>smart_toy</mat-icon>
      AI Assistant
    </h3>
    <div class="status-indicator">
      <span class="status-dot" [ngClass]="getStatusClass()"></span>
      <span class="status-text">{{ getStatusText() }}</span>
    </div>
  </div>

  <div class="chat-messages" #chatMessages>
    <div *ngFor="let message of chatHistory" class="message" [ngClass]="message.type">
      <div class="message-content">
        <div class="message-header">
          <span class="message-type">
            <mat-icon *ngIf="message.type === 'ai'">smart_toy</mat-icon>
            <mat-icon *ngIf="message.type === 'user'">person</mat-icon>
            {{ message.type === 'ai' ? 'AI Assistant' : 'You' }}
          </span>
          <span class="message-time">{{ message.timestamp | date:'shortTime' }}</span>
        </div>
        <div class="message-text">{{ message.content }}</div>
      </div>
    </div>
    
    <div *ngIf="isLoading" class="message ai">
      <div class="message-content">
        <div class="message-header">
          <span class="message-type">
            <mat-icon>smart_toy</mat-icon>
            AI Assistant
          </span>
        </div>
        <div class="typing-indicator">
          <span></span>
          <span></span>
          <span></span>
        </div>
      </div>
    </div>
  </div>

  <div class="chat-input">
    <mat-form-field appearance="outline" class="question-input">
      <mat-label>Ask me about your notes...</mat-label>
      <input matInput 
             [formControl]="questionControl" 
             placeholder="e.g., What projects am I working on?"
             (keyup.enter)="askQuestion()">
      <mat-icon matSuffix>question_answer</mat-icon>
    </mat-form-field>
    
    <div class="input-actions">
      <button mat-raised-button 
              color="primary" 
              [disabled]="!questionControl.value?.trim() || isLoading"
              (click)="askQuestion()">
        <mat-icon>send</mat-icon>
        Ask AI
      </button>
      
      <button mat-button 
              color="warn" 
              [disabled]="chatHistory.length <= 1"
              (click)="clearChat()">
        <mat-icon>clear_all</mat-icon>
        Clear Chat
      </button>
    </div>
  </div>

  <div class="chat-info">
    <p>
      <mat-icon>info</mat-icon>
      This is a mock AI assistant. You can ask questions and see how the interface works.
      To integrate real AI functionality, you'll need to implement the backend service.
    </p>
  </div>
</div>
